{"ast":null,"code":"import { put, call, takeLatest } from 'redux-saga/effects';\nimport { ADD_USER, CHECK_USER, DEL_USER, GET_ADD_USER, GET_CHECK_USER, GET_DEL_USER, GET_LOGIN_USER } from '../types/userTypes';\nimport axios from 'axios';\nconst url = process.env.REACT_APP_URL;\nconst addUser = user => {\n  return axios.post(`${url}/user/reg`, {\n    user\n  }).then(res => res.data);\n};\nconst loginUser = user => {\n  return axios.post(`${url}/user/login`, {\n    user\n  }).then(res => res.data);\n};\nconst delUser = () => {\n  return axios(`${url}/user/logout`).then(res => res.data);\n};\nconst checkUser = () => {\n  return axios(`${url}/user/check`).then(res => res.data);\n};\nfunction* addUserWatcher(action) {\n  try {\n    const user = yield call(addUser, action.payload);\n    window.localStorage.setItem('user', JSON.stringify(user));\n    yield put({\n      type: ADD_USER,\n      payload: user\n    });\n  } catch (err) {\n    yield put({\n      type: ADD_USER,\n      payload: null\n    });\n  }\n}\nfunction* loginUserWatcher(action) {\n  try {\n    const user = yield call(loginUser, action.payload);\n    yield put({\n      type: ADD_USER,\n      payload: user\n    });\n  } catch (err) {\n    yield put({\n      type: ADD_USER,\n      payload: null\n    });\n  }\n}\nfunction* delUserWatcher() {\n  try {\n    yield call(delUser);\n    yield put({\n      type: DEL_USER,\n      payload: null\n    });\n  } catch (err) {\n    yield put({\n      type: DEL_USER,\n      payload: null\n    });\n  }\n}\nfunction* checkUserWatcher() {\n  try {\n    const user = yield call(checkUser);\n    yield put({\n      type: CHECK_USER,\n      payload: user || null\n    });\n  } catch (err) {\n    console.log('check', Error);\n    yield put({\n      type: CHECK_USER,\n      payload: null\n    });\n  }\n}\nfunction* userWatcher() {\n  yield takeLatest(GET_ADD_USER, addUserWatcher);\n  yield takeLatest(GET_LOGIN_USER, loginUserWatcher);\n  yield takeLatest(GET_DEL_USER, delUserWatcher);\n  yield takeLatest(GET_CHECK_USER, checkUserWatcher);\n}\nexport default userWatcher;","map":{"version":3,"names":["put","call","takeLatest","ADD_USER","CHECK_USER","DEL_USER","GET_ADD_USER","GET_CHECK_USER","GET_DEL_USER","GET_LOGIN_USER","axios","url","process","env","REACT_APP_URL","addUser","user","post","then","res","data","loginUser","delUser","checkUser","addUserWatcher","action","payload","window","localStorage","setItem","JSON","stringify","type","err","loginUserWatcher","delUserWatcher","checkUserWatcher","console","log","Error","userWatcher"],"sources":["/Users/danil/Desktop/work/work/client/src/components/redux/sagas/userSagas.js"],"sourcesContent":["import { put, call, takeLatest } from 'redux-saga/effects';\nimport {\n  ADD_USER,\n  CHECK_USER,\n  DEL_USER,\n  GET_ADD_USER,\n  GET_CHECK_USER,\n  GET_DEL_USER,\n  GET_LOGIN_USER,\n} from '../types/userTypes';\nimport axios from 'axios';\nconst url = process.env.REACT_APP_URL;\n\nconst addUser = (user) => {\n  return axios.post(`${url}/user/reg`, { user }).then((res) => res.data);\n};\nconst loginUser = (user) => {\n  return axios.post(`${url}/user/login`, { user }).then((res) => res.data);\n};\nconst delUser = () => {\n  return axios(`${url}/user/logout`).then((res) => res.data);\n};\nconst checkUser = () => {\n  return axios(`${url}/user/check`).then((res) => res.data);\n};\n\nfunction* addUserWatcher(action) {\n  try {\n    const user = yield call(addUser, action.payload);\n    window.localStorage.setItem('user', JSON.stringify(user));\n    yield put({ type: ADD_USER, payload: user });\n  } catch (err) {\n    yield put({ type: ADD_USER, payload: null });\n  }\n}\n\nfunction* loginUserWatcher(action) {\n  try {\n    const user = yield call(loginUser, action.payload);\n    yield put({ type: ADD_USER, payload: user });\n  } catch (err) {\n    yield put({ type: ADD_USER, payload: null });\n  }\n}\n\nfunction* delUserWatcher() {\n  try {\n    yield call(delUser);\n\n    yield put({ type: DEL_USER, payload: null });\n  } catch (err) {\n    yield put({ type: DEL_USER, payload: null });\n  }\n}\n\nfunction* checkUserWatcher() {\n  try {\n    const user = yield call(checkUser);\n    yield put({ type: CHECK_USER, payload: user || null });\n  } catch (err) {\n    console.log('check', Error);\n    yield put({ type: CHECK_USER, payload: null });\n  }\n}\n\nfunction* userWatcher() {\n  yield takeLatest(GET_ADD_USER, addUserWatcher);\n  yield takeLatest(GET_LOGIN_USER, loginUserWatcher);\n  yield takeLatest(GET_DEL_USER, delUserWatcher);\n  yield takeLatest(GET_CHECK_USER, checkUserWatcher);\n}\n\nexport default userWatcher;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}